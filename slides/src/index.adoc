= Type Driven User Interfaces: with [.yellow]#Q_t# and [.yellow]#C++#
:author: Andreas Reischuck
:twitter: @arBmind
:!avatar: andreas.png
:!organization: HicknHack Software GmbH
:!sectids:
:imagesdir: images
:icons: font
:use-link-attrs:
:title-separator: :
:codedir: code
:data-uri:

[.worldsummit]#Qt World Summit 2019 Berlin#

++++
<svg class="overlay build" viewBox="0 0 1280 720" width="1920" height="1080">
    <g class="qtLogo" transform="translate(228,205) scale(2)"
        stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <path fill="#fff"
            d="M48,42 L56,34 L56,0.2 L8,0.2 L0.2,8 L0.2,42 Z" />
        <path fill="#41CD52"
            d="M20.9078947,10.7234043 C18.7032164,10.7234043 17.1827485,11.4716796 16.3464912,12.9879217 C15.5292398,14.5041638 15.1111111,16.9065214 15.1111111,20.2343774 C15.1111111,23.542542 15.5102339,25.9252082 16.3084795,27.342993 C17.1067251,28.7607778 18.6461988,29.4893617 20.9078947,29.4893617 C23.1695906,29.4893617 24.6900585,28.7804693 25.4883041,27.3823759 C26.2675439,25.9842826 26.6666667,23.6016164 26.6666667,20.2737604 C26.6666667,16.9262129 26.2675439,14.5041638 25.4502924,12.9879217 C24.6330409,11.4716796 23.1125731,10.7234043 20.9078947,10.7234043" />
        <path fill="#41CD52"
            d="M40.8000381,32.4774968 C38.8000381,32.4774968 37.4286095,32.0129806 36.6855619,31.0839484 C35.9428952,30.1549161 35.5619429,28.3934323 35.5619429,25.8000774 L35.5619429,17.4387871 L32.857181,17.4387871 L32.857181,14.1097548 L35.5619429,14.1097548 L35.5619429,8.88394839 L39.3905143,8.88394839 L39.3905143,14.1097548 L44.2667048,14.1097548 L44.2667048,17.4579484 L39.3905143,17.4579484 L39.3905143,25.374271 C39.3905143,26.8450452 39.5048,27.8127871 39.7143238,28.2774968 C39.9236571,28.7613677 40.4762286,28.9936258 41.3333714,28.9936258 L44.2286095,28.8773032 L44.3998476,32.0129806 C42.8381333,32.3224645 41.6379429,32.4774968 40.8000381,32.4774968 L40.8000381,32.4774968 Z M29.7714667,36.2321419 L26.1333714,37.9549161 L22.9905143,32.7095613 C22.5333714,32.8450452 21.8286095,32.9226581 20.8381333,32.9226581 C17.1619429,32.9226581 14.5905143,31.9162065 13.1428952,29.9031097 C11.6952762,27.8904 10.9714667,24.6968516 10.9714667,20.3611742 C10.9714667,16.0063355 11.7143238,12.774271 13.1809905,10.6645935 C14.6476571,8.55472258 17.2000381,7.49020645 20.8381333,7.49020645 C24.4762286,7.49020645 27.0286095,8.53556129 28.4762286,10.6452387 C29.9428952,12.7355613 30.6667048,15.9678194 30.6667048,20.3420129 C30.6667048,23.2256903 30.3619429,25.548271 29.7714667,27.3097548 C29.1617524,29.0904 28.1905143,30.4452387 26.8190857,31.374271 L29.7714667,36.2321419 Z M50.5143238,0.174270968 L48.5714667,0.174270968 L7.75241905,0.174270968 L3.80952383e-05,8.05169032 L3.80952383e-05,34.3934323 L3.80952383e-05,36.5420129 L3.80952383e-05,41.9998839 L5.37146667,41.9998839 L7.31432381,41.9998839 L48.1333714,41.9998839 L55.8857524,34.1226581 L55.8857524,7.78052903 L55.8857524,5.63233548 L55.8857524,0.174270968 L50.5143238,0.174270968 Z" />
    </g>
    <g class="hnhlogo" transform="translate(10 550) scale(2)" fill="#fff">
        <path
            d="M79.685,34.532c-0.089-1.892-0.292-6.161-0.325-6.321c-0.042-0.205-1.77,0.488-4.821,0.488s-4.779-0.693-4.821-0.488 c-0.034,0.16-0.236,4.43-0.325,6.321h-1.914c-0.089-1.892-0.292-6.161-0.325-6.321c-0.042-0.205-1.77,0.488-4.821,0.488 c-3.051,0-4.779-0.693-4.821-0.488c-0.034,0.16-0.236,4.43-0.325,6.321h-2.036c-0.071-1.465-0.146-2.236-0.184-2.53 c0.398,0.018,0.708,0.1,0.894,0.286c-0.125-3.061-5.282-1.542-5.824-1.814c-2.105-1.062-7.326-4.446-7.3-4.964 c0.025-0.519,3.891-5.347,3.891-5.347s5.273,5.521,5.868,5.55c0.595,0.029,10.304-3.535,9.11-0.417 c1.983-1.796,1.3-2.54,3.311-2.44c2.012,0.1,3.534-0.019,5.034,1.481c-0.276-2.359-3.314-2.723-5.488-2.831 c-2.174-0.108-10.564,2.398-11.272,2.516c-0.924,0.152-3.88-4.011-4.488-4.683c13.837,1.831,17.964-9.801,27.701-3.354 c4.177,2.766,9.031,2.019,14.046,9.322c-5.743-10.568-1.846-8.978-4.994-12.456c-2.51-2.772-10.083-2.087-15.497-6.585 C61.026-1.155,45.045-5.689,4.271,14.68c27.78-11.208,40.532,4.081,40.532,4.081s-4.413,6.747-4.434,7.174 C40.349,26.361,47,30.559,47,30.559s-2.461,0.233-2.285,2.011c0.167-0.167,0.352-0.279,0.548-0.357 c-0.041,0.389-0.102,1.121-0.16,2.32h-2.036c-0.089-1.892-0.292-6.161-0.325-6.321c-0.042-0.205-1.77,0.488-4.821,0.488 s-4.779-0.693-4.821-0.488c-0.034,0.16-0.236,4.43-0.325,6.321h-2.28c-0.088-1.892-0.292-6.161-0.325-6.321 c-0.042-0.205-1.769,0.488-4.821,0.488s-4.779-0.693-4.821-0.488c-0.034,0.16-0.236,4.43-0.325,6.321H0v4.822h100v-4.822H79.685z" />
        <path
            d="M4.212,42.94v5.025h4.871V42.94h2.949V56.02H9.083v-5.472H4.212v5.472H1.243V42.94H4.212z M18.526,43.892 c0,0.814-0.621,1.475-1.591,1.475c-0.931,0-1.552-0.66-1.533-1.475c-0.02-0.854,0.602-1.494,1.552-1.494 C17.905,42.397,18.506,43.037,18.526,43.892z M15.479,56.02V46.53h2.949v9.489H15.479z M28.822,55.787 c-0.524,0.232-1.514,0.446-2.639,0.446c-3.066,0-5.026-1.883-5.026-4.871c0-2.774,1.902-5.045,5.433-5.045 c0.776,0,1.63,0.136,2.251,0.368l-0.465,2.193c-0.35-0.156-0.874-0.291-1.649-0.291c-1.553,0-2.562,1.105-2.542,2.658 c0,1.746,1.165,2.658,2.601,2.658c0.699,0,1.242-0.116,1.688-0.311L28.822,55.787z M34.306,50.528h0.039 c0.213-0.389,0.446-0.777,0.679-1.146l1.921-2.853h3.551l-3.396,3.842l3.881,5.647h-3.629l-2.29-3.9l-0.757,0.932v2.969h-2.95 V42.242h2.95V50.528z M42.972,49.558c0-1.184-0.039-2.192-0.077-3.027h2.561l0.136,1.3h0.058c0.388-0.602,1.358-1.513,2.93-1.513 c1.94,0,3.396,1.28,3.396,4.075v5.627h-2.95v-5.259c0-1.223-0.427-2.057-1.494-2.057c-0.815,0-1.3,0.562-1.494,1.105 c-0.078,0.194-0.117,0.466-0.117,0.738v5.472h-2.95V49.558z M58.315,42.94v5.025h4.871V42.94h2.95V56.02h-2.95v-5.472h-4.871v5.472 h-2.969V42.94H58.315z M77.441,53.71c0,0.912,0.039,1.786,0.136,2.31h-2.658l-0.175-0.951h-0.058 c-0.621,0.757-1.591,1.165-2.717,1.165c-1.921,0-3.066-1.397-3.066-2.911c0-2.465,2.212-3.648,5.569-3.629v-0.136 c0-0.505-0.272-1.223-1.728-1.223c-0.97,0-1.999,0.33-2.62,0.718l-0.543-1.901c0.66-0.369,1.96-0.834,3.687-0.834 c3.164,0,4.172,1.862,4.172,4.094V53.71z M74.569,51.537c-1.552-0.02-2.755,0.35-2.755,1.494c0,0.757,0.504,1.125,1.164,1.125 c0.738,0,1.339-0.485,1.533-1.086c0.039-0.155,0.058-0.33,0.058-0.505V51.537z M87.797,55.787 c-0.524,0.232-1.514,0.446-2.639,0.446c-3.066,0-5.026-1.883-5.026-4.871c0-2.774,1.901-5.045,5.433-5.045 c0.776,0,1.63,0.136,2.251,0.368l-0.465,2.193c-0.35-0.156-0.874-0.291-1.65-0.291c-1.552,0-2.561,1.105-2.542,2.658 c0,1.746,1.165,2.658,2.601,2.658c0.698,0,1.242-0.116,1.688-0.311L87.797,55.787z M93.281,50.528h0.039 c0.213-0.389,0.446-0.777,0.679-1.146l1.921-2.853h3.551l-3.396,3.842l3.881,5.647h-3.629l-2.29-3.9l-0.757,0.932v2.969h-2.95 V42.242h2.95V50.528z M1.127,71.701c0.737,0.505,1.766,0.873,2.872,0.873c1.941,0,3.144-1.105,3.144-2.717 c0-1.475-0.757-2.328-2.639-3.065c-2.115-0.737-3.376-1.824-3.376-3.609c0-1.921,1.591-3.318,3.803-3.318 c1.222,0,2.154,0.33,2.6,0.621l-0.349,0.776c-0.349-0.253-1.184-0.622-2.309-0.622c-2.115,0-2.833,1.359-2.833,2.388 c0,1.455,0.834,2.192,2.716,2.931c2.154,0.873,3.299,1.843,3.299,3.803c0,1.902-1.358,3.609-4.152,3.609 c-1.125,0-2.445-0.388-3.125-0.893L1.127,71.701z M23.029,68.402c0,3.493-2.387,4.968-4.463,4.968 c-2.406,0-4.269-1.883-4.269-4.793c0-3.202,2.095-4.948,4.405-4.948C21.283,63.629,23.029,65.55,23.029,68.402z M15.229,68.519 c0,2.329,1.494,4.075,3.396,4.075c1.94,0,3.473-1.746,3.473-4.133c0-1.708-0.97-4.075-3.415-4.075 C16.315,64.386,15.229,66.521,15.229,68.519z M29.894,73.156v-8.577h-1.339v-0.737h1.339v-0.504c0-1.437,0.271-2.601,1.028-3.357 c0.562-0.562,1.339-0.815,2.057-0.815c0.602,0,1.125,0.155,1.397,0.311l-0.291,0.738c-0.252-0.137-0.621-0.272-1.184-0.272 c-1.727,0-2.095,1.592-2.095,3.377v0.523h2.503v0.737h-2.503v8.577H29.894z M40.812,61.785v2.057h2.659v0.737h-2.659v6.055 c0,1.184,0.369,1.94,1.358,1.94c0.485,0,0.834-0.077,1.067-0.155l0.117,0.719c-0.311,0.136-0.738,0.232-1.3,0.232 c-0.679,0-1.242-0.232-1.591-0.679c-0.427-0.485-0.582-1.262-0.582-2.213v-5.899h-1.572v-0.737h1.572v-1.707L40.812,61.785z M50.004,63.842l1.553,5.298c0.33,1.087,0.602,2.018,0.795,2.911h0.058c0.233-0.854,0.543-1.844,0.932-2.911l1.863-5.298h0.874 l1.785,5.259c0.369,1.126,0.66,2.077,0.912,2.95h0.039c0.194-0.873,0.485-1.805,0.834-2.931l1.669-5.278h0.951l-3.104,9.314h-0.815 l-1.746-5.181c-0.408-1.125-0.718-2.135-0.971-3.183h-0.039c-0.271,1.105-0.621,2.135-1.009,3.202l-1.863,5.161h-0.815 l-2.853-9.314H50.004z M74.411,70.944c0,0.737,0.039,1.494,0.136,2.212h-0.834l-0.136-1.339h-0.059 c-0.446,0.719-1.475,1.553-2.969,1.553c-1.863,0-2.736-1.319-2.736-2.562c0-2.154,1.902-3.454,5.686-3.415V67.16 c0-0.932-0.175-2.774-2.387-2.755c-0.815,0-1.669,0.213-2.329,0.698l-0.291-0.68c0.834-0.562,1.882-0.795,2.716-0.795 c2.698,0,3.202,2.018,3.202,3.687V70.944z M73.499,68.17c-2.038-0.059-4.715,0.252-4.715,2.483c0,1.339,0.893,1.94,1.863,1.94 c1.552,0,2.425-0.95,2.755-1.862c0.059-0.194,0.097-0.389,0.097-0.563V68.17z M81.876,66.637c0-0.932-0.039-1.902-0.078-2.795 h0.854l0.039,1.883h0.039c0.408-1.164,1.378-2.096,2.659-2.096c0.116,0,0.252,0.02,0.369,0.039v0.893 c-0.136-0.039-0.271-0.039-0.446-0.039c-1.281,0-2.192,1.106-2.445,2.601c-0.039,0.271-0.078,0.582-0.078,0.893v5.142h-0.912 V66.637z M91.961,68.402c0,2.988,1.63,4.152,3.551,4.152c1.358,0,2.057-0.271,2.581-0.523l0.233,0.737 c-0.349,0.194-1.3,0.602-2.93,0.602c-2.678,0-4.347-1.96-4.347-4.696c0-3.104,1.785-5.045,4.191-5.045 c3.047,0,3.629,2.872,3.629,4.211c0,0.252,0,0.407-0.039,0.562H91.961z M97.899,67.665c0.02-1.3-0.524-3.279-2.775-3.279 c-2.057,0-2.95,1.843-3.105,3.279H97.899z" />
    </g>
</svg>
++++

[.cue]
****
Welcome

Goals of this talk:

* Go play with C++ / hacken?
* Increase understanding - What is what?
* Not Important - Use this next week.

Hopefully for everybody I have something unknown!
****


== Distributed System

[%build]
* complex!
* (note: simplified for slides!)

== !

++++
<!-- for editing help:
 * https://editor.method.ac
 * https://svg-edit.github.io/svgedit/releases/latest/editor/svg-editor.html
-->
<svg class="build" viewBox="0 0 1280 720" width="1920" height="1080">
    <defs>
        <filter id="dropshadow" height="130%" width="130%">
            <feGaussianBlur in="SourceAlpha" stdDeviation="5"/>
            <feOffset dx="0" dy="0" result="offsetblur"/>
            <feComponentTransfer>
                <feFuncA type="linear" slope="0.5"/>
            </feComponentTransfer>
            <feMerge> 
                <feMergeNode/>
                <feMergeNode in="SourceGraphic"/>
            </feMerge>
        </filter>
        <rect id="activeRect" x="2%" y="2%" width="96%" height="96%" fill="#fff" rx="20" ry="20" fill-opacity="0" stroke="#41CD52" stroke-width="15" />
        <filter id="activeMarker" filterUnits="objectBoundingBox">
            <feImage xlink:href="#activeRect" preserveAspectRatio="none" />
            <feMerge> 
                <feMergeNode />
                <feMergeNode in="SourceGraphic"/>
            </feMerge>
        </filter>
    </defs>
    <g class="clientMonitor" transform="translate(350,180) scale(1.5)">
        <g class="build">
            <path class="UserScreen" style="filter:url(#dropshadow)" 
                fill="#fff8dc" stroke="#222" stroke-width="1.33"
                d="M-100,-60 h200 v120 h-200 z
                m4,6 v108 h192 v-108 z
                M-110,80 h5 
                    v-3 h12 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h12 v3 
                    h5 v5 H-110 z
                M60,70 h30 v30 c0,7 -7,15 -15,15 c-8,0 -15,-8 -15,-15 z m15,0 v15"/>

            <path class="UserScreenContent"
                fill="#222" d="M-100,-60 m4,6 v108 h192 v-108 z"/>
        </g>

        <path class="UserSmiley build"
            fill="#ddc" stroke="#222" stroke-width="0.66"
            d="M0,-20 a20,20 0,0,0, 0,40 a20,20 0,0,0, 0,-40z 
                m-15,25 a16,10 0,0,0, 30,0
                m-7,-13 a3,3 0,1,0, 1,0 z
                m-16,0 a3,3 0,1,0, 1,0 z
                m8,-7 l8,-10 m-9,10 l2,-9"
            transform="translate(-110,-60) scale(2)" />

        <g class="build">
            <path class="ActionButton"
                fill="#acf" stroke="#fff" stroke-width="2"
                d="M-85,-22
                    a6,6 0,0,1 6,-6 h160 
                    a6,6 0,0,1 6,6 v40
                    a6,6 0,0,1 -6,6 h-160
                    a6,6 0,0,1 -6,-6 z" />
            <text class="ActionText" x="0" y="0">Action</text>
            <path class="MouseCursor"
                fill="#fff" stroke="#222"
                d="M0,0 l10,17 l-7,-2 l3,10 h-12 l3,-10 l-7,2 z"
                transform="translate(45,5) rotate(-40) scale(2)" />
        </g>
    </g>

    <g class="command build" transform="translate(700,140)">
        <path class="commandArrow" style="filter:url(#dropshadow)"
            fill="#fca" stroke="#222" stroke-width="2"
            d="M-150,0
                c-1,-1.66 -.66,-5 1,-6
                c30,-20 145,-60 200,-50
                c2.5,.5 5,-2.5 5,-5 v-30
                c0,-5 3,-8 15,0 l120,80
                c3,2 3,6 0,8 l-120,80
                c-12,8 -15,5 -15,0 v-30
                c0,-2.5 -1,-5 -4.5,-6
                c-53,-7 -120,20 -150,40
                c-1.66,1 -4,.33 -5,-1.33 z"
            transform="rotate(8)" />
        <text class="commandText" x="0" y="0">Command</text>
    </g>

    <g class="server build" transform="translate(1050,150)">
        <path class="ServerBox" style="filter:url(#dropshadow)"
            fill="#fff8dc" stroke="#222" stroke-width="1"
            d="M-65,-25 h130 v100 h-130 z
                l15,-15 h130 v100 l-15,15
                m0,-100 l15,-15"
            transform="scale(2)" />

        <path class="ServerFilter build"
            fill="#acf" stroke="#222" stroke-width="2"
            d="M-30,-30
                a30,10 0,0,1 60,0 v10 l-25,25 v30 l-10,-10 v-20 l-25,-25 z
                m5,0 a25,6 0,0,0 50,0 a25,6 0,0,0 -50,0"
            transform="translate(-60,80)" />

        <path class="ServerStorage build"
            fill="#acf" stroke="#222" stroke-width="2"
            d="M-30,-30 
                a30,10 0,0,1 60,0 v60 
                a30,10 0,0,1 -60,0 z
               m60,0 a30,10 0,0,1 -60,0
               m60,15 a30,10 0,0,1 -60,0
               m60,15 a30,10 0,0,1 -60,0
               m60,15 a30,10 0,0,1 -60,0"
            transform="translate(60,80)" />

        <text class="ServerText" x="0" y="0">Server</text>
    </g>

    <g class="events build" transform="translate(1100, 450)">
        <path class="commandArrow" style="filter:url(#dropshadow)"
            fill="#fca" stroke="#222" stroke-width="2"
            d="M-150,0
                c-1,-1.66 -.66,-5 1,-6
                c30,-20 145,-60 200,-50
                c2.5,.5 5,-2.5 5,-5 v-30
                c0,-5 3,-8 15,0 l120,80
                c3,2 3,6 0,8 l-120,80
                c-12,8 -15,5 -15,0 v-30
                c0,-2.5 -1,-5 -4.5,-6
                c-53,-7 -120,20 -150,40
                c-1.66,1 -4,.33 -5,-1.33 z"
            transform="rotate(140)" />
        
        <text class="commandText" x="-50" y="40">Events</text>
    </g>

    <g class="compute build" transform="translate(825, 575)">
        <path class="ComputeBox" style="filter:url(#dropshadow)"
            fill="#fff8dc" stroke="#222" stroke-width="2"
            d="M-120,-80 h240 v160 h-240 z" />
        <path class="ComputeSum"
            fill="#acf" stroke="#222" stroke-width="3"
            d="M-55,-65
                h100 l10,40 h-7 l-3,-5 c-8,-14 -10,-20 -32,-20 h-50
                l45,45 l-40,40
                h45 c12,0 24,-4 32,-20 l3,-5 h7 l-12,50 h-98
                v-15 l40,-40 l-40,-40 z"
            transform="scale(0.66) translate(0,30)" />
        
        <text class="ViewText" x="0" y="-50">Computations</text>
    </g>

    <g class="updates build" transform="translate(530, 500)">
        <path class="commandArrow" style="filter:url(#dropshadow)" 
            fill="#fca" stroke="#222" stroke-width="2"
            d="M-150,0
                c-1,-1.66 -.66,-5 1,-6
                c30,-20 145,-60 200,-50
                c2.5,.5 5,-2.5 5,-5 v-30
                c0,-5 3,-8 15,0 l120,80
                c3,2 3,6 0,8 l-120,80
                c-12,8 -15,5 -15,0 v-30
                c0,-2.5 -1,-5 -4.5,-6
                c-53,-7 -120,20 -150,40
                c-1.66,1 -4,.33 -5,-1.33 z"
            transform="scale(-1,1) rotate(0)" />
        
        <text class="commandText" x="-20" y="0">Updates</text>
    </g>

    <g class="views build" transform="translate(170, 550) scale(1.5)">
        <path class="ViewScreen" style="filter:url(#dropshadow)"
            fill="#fff8dc" stroke="#222" stroke-width="1.33"
            d="M-100,-60 h200 v120 h-200 z
               m4,6 v108 h192 v-108 z
               M-5,60 v10 h-20 v5 h50 v-5 h-20 v-10 z"/>

        <path class="ViewScreenContent"
            fill="#222" d="M-100,-60 m4,6 v108 h192 v-108 z"/>

        <path class="ViewTree build"
            fill="#222" stroke="#fff" stroke-width="2.5"
            d="M-50,-50
                m3,0 h10 a3,3 0,0,1 3,3 v10 a3,3 0,0,1 -3,3 h-10 a3,3 0,0,1 -3,-3 v-10 a3,3 0,0,1 3,-3 z
                m0,8 h10
                m10,-6 h60 v12 h-60 z
               M-42,-30 v12 m0,5 v12 m0,5 v12 m0,5 v8 h10
                m5,-8 h10 a3,3 0,0,1 3,3 v10 a3,3 0,0,1 -3,3 h-10 a3,3 0,0,1 -3,-3 v-10 a3,3 0,0,1 3,-3 z
                m0,8 h10 m-5,-5 v10
                m15,-11 h35 v12 h-35 z
               M-42,-24 h10
                m5,-8 h10 a3,3 0,0,1 3,3 v10 a3,3 0,0,1 -3,3 h-10 a3,3 0,0,1 -3,-3 v-10 a3,3 0,0,1 3,-3 z
                m0,8 h10
                m10,-6 h30 v12 h-30 z
               M-22,-12 v12 m0,5 v7 h10
                m5,-6 h25 v12 h-25 z
               M-22,-6 h10
                m5,-6 h40 v12 h-40 z"
            transform="translate(-40,5) scale(0.9)" />

        <path class="ViewGraph build"
            fill="#222" stroke="#fff" stroke-width="2.5"
            d="M-40,40 v-50 h20 v50 z
               m25,0 v-70 h20 v70 z
               m25,0 v-60 h20 v60 z"
            transform="translate(50,0)" />
        
        <text class="ViewText" x="0" y="-90">Views</text>
    </g>

</svg> 
++++

[.section]
== How can we design this?

[%build]
* data flow is clear
* ensure data compatibility
* communicate with developers


[.subtitle]
== Strong Types

[.cue]
****
* Let's begin at the bottom

Why strong types?
****


[.source.hd]
== !

[source, cpp, subs=quotes,macros]
----
struct Point {
    double x;
    double y;
    double z;
};
----

[.source.hd]
== !

[source%nested, cpp]
----
struct Point {
    double x;
    double y;
    double z;
    // nest++
    double weight;
    // nest--
};
----

[.source.hd]
== !

[source%nested, cpp]
----
struct Point {
    double x;
    double y;
    double z;
    double weight;
    // nest++
    double texX;
    double texY;
    // nest--
};
----

[.source.hd]
== !

[.build]
--
[source%nested, cpp, subs=quotes,macros]
----
struct X { double v{}; };
// nest++
struct Y { double v{}; };
struct Z { double v{}; };
// nest--

// nest++
struct Point {
    [.token.class-name]##X## x;
    [.token.class-name]##Y## y;
    [.token.class-name]##Z## z;
};
// nest--
----
--


[.source.hd]
== !

[source%nested, cpp, subs=quotes,macros]
----
struct X { double v{}; };
struct Y { double v{}; };
struct Z { double v{}; };

// nest++
using [.token.class-name]##Point## = std::tuple&lt;[.token.class-name]##X##, [.token.class-name]##Y##, [.token.class-name]##Z##>;
// nest--
----


[.source]
== !

[.build]
--
[source%nested, cpp, subs=quotes,macros]
----
// nest++
template&lt;class V, class /\*Tag*/ >
// nest--
struct Strong {
    // nest++
    [.token.class-name]##V## v{};
    // nest--
};
----
--

[.cue]
****
* The template signature: base type and any amount of tags
* Inside we store just the value

You might want to add operators, but that's enough for this talk.

If you want to learn more about strong types…
****


== !

image::BarneyDellar_StrongTypes_CppOnSea.png[role="center", width="1280"]

link:https://www.youtube.com/watch?v=fWcnp7Bulc8[Strong Types in C\++ - Barney Dellar [C++ on Sea 2019]]

[.cue]
****
There are a lot of good talks and blog posts.

If you want to stick to standard take a look at <chronos>.

****


[.source.hd]
== !

[.build]
--
[source%nested, cpp, subs=quotes,macros]
----
using [.token.string]##X## = [.token.class-name]##Strong##&lt;double, struct XTag>;
// nest++
using [.token.string]##Y## = [.token.class-name]##Strong##&lt;double, struct YTag>;
using [.token.string]##Z## = [.token.class-name]##Strong##&lt;double, struct ZTag>;
// nest--

// nest++
struct Point {
    [.token.string]##X## x;
    [.token.string]##Y## y;
    [.token.string]##Z## z;
};
// nest--
----
--


[.cue]
****
* So we use our strong type
* Build the tag type just in place
* They are just to make each type different
****

[.source.hd]
== !

[source%nested, cpp, subs=quotes,macros]
----
using [.token.string]##X## = [.token.class-name]##Strong##&lt;double, struct XTag>;
using [.token.string]##Y## = [.token.class-name]##Strong##&lt;double, struct YTag>;
using [.token.string]##Z## = [.token.class-name]##Strong##&lt;double, struct ZTag>;

// nest++
using [.token.class-name]##Point## = std::tuple&lt;[.token.string]##X##, [.token.string]##Y##, [.token.string]##Z##>;
// nest--
----


[.cue]
****
* Tuple is an implementation that stores all our values

If we design our distributed system, we do not really care about storage details.
A network protocol will use something different to transport the data.
****

[.source.hd]
== !

[source%nested, cpp, subs=quotes,macros]
----
using [.token.string]##X## = [.token.class-name]##Strong##&lt;double, struct XTag>;
using [.token.string]##Y## = [.token.class-name]##Strong##&lt;double, struct YTag>;
using [.token.string]##Z## = [.token.class-name]##Strong##&lt;double, struct ZTag>;

// nest++
using [.token.class-name]##Point## = [.token.bold]##AllOf##&lt;[.token.string]##X##, [.token.string]##Y##, [.token.string]##Z##>;
// nest--
----

[.cue]
****
* So we name it AllOf
* We describe that all of the types have to be stored or transmitted.
****


[.subtitle]
== Data Schema

[.cue]
****
Let's call this a data schema.

That's nothing new…
****

== Existing Data Schemas

[%build]
* XML schema
* JSON schema
* data definition language (DDL)

[.cue]
****
Schemas are everywhere.

They describe how our data is organised
These are essential part of a distributed system.

* We can derive how to store our data
* And we can derive how to communicate
****


[.source]
== !

[.build]
--
[source%nested, cpp, subs=quotes,macros]
----
using [.token.class-name]##Point## = [.token.bold]##AllOf##&lt;[.token.string]##X##, [.token.string]##Y##, [.token.string]##Z##>;
// nest++
using [.token.class-name]##Points## = [.token.bold]##SequenceOf##&lt;[.token.class-name]##Point##>;
// nest--

// nest++
using [.token.class-name]##Geometry## = [.token.bold]##AllOf##&lt;[.token.class-name]##Points##, [.token.class-name]##Faces##, [.token.class-name]##Shaders##>;
// nest--
// nest++
using [.token.class-name]##Object## = [.token.bold]##OneOf##&lt;[.token.class-name]##Geometry##, [.token.class-name]##Light##, [.token.class-name]##Camera##>;
// nest--
// nest++
using [.token.class-name]##Scene## = [.token.bold]##Hierarchy##&lt;[.token.string]##ObjectId##, [.token.class-name]##Object##>;
// nest--

// nest++
using [.token.class-name]##Document## = [.token.bold]##AllOf##&lt;[.token.string]##Name##, [.token.class-name]##Scene##>;
// nest--
// nest++
using [.token.class-name]##Documents## = [.token.bold]##EntitySet##&lt;[.token.string]##DocId##, [.token.class-name]##Document##>;
// nest--
----
--

== !

image::DocumentsSchema/Slide1.png[role="center", width="1920"]
== !

image::DocumentsSchema/Slide2.png[role="center", width="1920"]
== !

image::DocumentsSchema/Slide3.png[role="center", width="1920"]
== !

image::DocumentsSchema/Slide4.png[role="center", width="1920"]
== !

image::DocumentsSchema/Slide5.png[role="center", width="1920"]
== !

image::DocumentsSchema/Slide6.png[role="center", width="1920"]
== !

image::DocumentsSchema/Slide7.png[role="center", width="1920"]


== !

image::Geburtstag.jpg[role="center", width="1920"]

[.cue]
****
We have now everything to try this with C++ and Qt

* Strong Types
* Distributed System: Commands, Events, Protocols,
* data schema
****


[.subtitle]
== Schema with C++ types

[.cue]
****
Let's start with the basics.

How can we express our data schema in C++.
****

[.source.hd]
== !

[.build]
--
[source%nested, cpp, subs=quotes,macros]
----
// recursive schema primitives:
// nest++
template&lt;class...> struct [.token.black.bold]##AllOf## {};
// nest--
// nest++
template&lt;class...> struct [.token.black.bold]##OneOf## {};
// nest--
// nest++
template&lt;class> struct [.token.black.bold]##SequenceOf## {};
// nest--

// nest++
template&lt;class [.token.string]##Id##, class>
struct [.token.black.bold]##EntitySet## {};
// nest--
// nest++
template&lt;class [.token.string]##Id##, class>
struct [.token.black.bold]##Hierarchy## {};
// nest--
----
--

[.cue]
****
Notice these are all empty structures.

Our hierarchy is customized to our special needs.

How do we make use of this schema if everything is just empty?
****

== Type driven [.green]#Code# generation

[.canvas]
image::grandValleyCattleDrive.jpg[]

[.source.hd]
== !

[source, cpp, subs=quotes,macros]
----
&nbsp;
&nbsp;
&nbsp;
&nbsp;
&nbsp;
[.token.bold]##AllOf##&lt;...>
    -> std::tuple&lt;...>;
----

[.source.hd]
== !

[source%nested, cpp, subs=quotes,macros]
----
&nbsp;
&nbsp;
&nbsp;
&nbsp;
// nest++
template&lt;class... Ts>
// nest--
[.token.bold]##AllOf##&lt;Ts...>
    -> std::tuple&lt;...>;
----

[.source.hd]
== !

[source%nested, cpp, subs=quotes,macros]
----
&nbsp;
&nbsp;
&nbsp;
&nbsp;
template&lt;class... Ts>
// nest++
[.token.class-name]##StorageFor##([.token.bold]##AllOf##&lt;Ts...>)
// nest--
    -> std::tuple&lt;...>;
----

[.source.hd]
== !

[source%nested, cpp, subs=quotes,macros]
----
&nbsp;
&nbsp;
&nbsp;
&nbsp;
template&lt;class... Ts>
[.token.class-name]##StorageFor##([.token.bold]##AllOf##&lt;Ts...>)
// nest++
    -> std::tuple&lt;[.token.class-name]##StorageFor##&lt;Ts>...>;
// nest--
----

[.source.hd]
== !

[source%nested, cpp, subs=quotes,macros]
----
// nest++
template&lt;class [.token.black]##T##>
using [.token.class-name]##StorageFor## =
    decltype(storageFor([.token.constant]##adl##, [.token.constant]##ptr##&lt;T>));
// nest--
&nbsp;
template&lt;class... Ts>
// nest++
auto storageFor([.token.class-name]##ADL##, [.token.bold]##AllOf##&lt;Ts...> *)
// nest--
    -> std::tuple&lt;[.token.class-name]##StorageFor##&lt;Ts>...>;
----


[.cue]
****
We introduce a using retrieve the result type of our function.

To make this recursion work, we need ADL.

Normally a templated function only sees what was defined before the function.
ADL overrides this and adds everything of our namespace anyways.

* adl is a constexpr instance of ADL.
* ptr<T> is a constexpr nullptr to T.

This ensures the compiler wont instantiate any complex types.

Our functon signature changed accordingly.
****

== Let us generate everything!


== !


++++
<!-- for editing help:
 * https://editor.method.ac
 * https://svg-edit.github.io/svgedit/releases/latest/editor/svg-editor.html
-->
<svg class="" viewBox="0 0 1280 720" width="1920" height="1080">

    <g class="clientMonitor" transform="translate(350,180) scale(1.5)">
        <g class="">
            <path class="UserScreen" style="filter:url(#dropshadow)" 
                fill="#fff8dc" stroke="#222" stroke-width="1.33"
                d="M-100,-60 h200 v120 h-200 z
                m4,6 v108 h192 v-108 z
                M-110,80 h5 
                    v-3 h12 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h12 v3 
                    h5 v5 H-110 z
                M60,70 h30 v30 c0,7 -7,15 -15,15 c-8,0 -15,-8 -15,-15 z m15,0 v15"/>

            <path class="UserScreenContent"
                fill="#222" d="M-100,-60 m4,6 v108 h192 v-108 z"/>
        </g>

        <path class="UserSmiley"
            fill="#ddc" stroke="#222" stroke-width="0.66"
            d="M0,-20 a20,20 0,0,0, 0,40 a20,20 0,0,0, 0,-40z 
                m-15,25 a16,10 0,0,0, 30,0
                m-7,-13 a3,3 0,1,0, 1,0 z
                m-16,0 a3,3 0,1,0, 1,0 z
                m8,-7 l8,-10 m-9,10 l2,-9"
            transform="translate(-110,-60) scale(2)" />

        <g class="">
            <path class="ActionButton"
                fill="#acf" stroke="#fff" stroke-width="2"
                d="M-85,-22
                    a6,6 0,0,1 6,-6 h160 
                    a6,6 0,0,1 6,6 v40
                    a6,6 0,0,1 -6,6 h-160
                    a6,6 0,0,1 -6,-6 z" />
            <text class="ActionText" x="0" y="0">Action</text>
            <path class="MouseCursor"
                fill="#fff" stroke="#222"
                d="M0,0 l10,17 l-7,-2 l3,10 h-12 l3,-10 l-7,2 z"
                transform="translate(45,5) rotate(-40) scale(2)" />
        </g>
    </g>

    <g class="command" transform="translate(700,140)">
        <path class="commandArrow" style="filter:url(#dropshadow)"
            fill="#fca" stroke="#222" stroke-width="2"
            d="M-150,0
                c-1,-1.66 -.66,-5 1,-6
                c30,-20 145,-60 200,-50
                c2.5,.5 5,-2.5 5,-5 v-30
                c0,-5 3,-8 15,0 l120,80
                c3,2 3,6 0,8 l-120,80
                c-12,8 -15,5 -15,0 v-30
                c0,-2.5 -1,-5 -4.5,-6
                c-53,-7 -120,20 -150,40
                c-1.66,1 -4,.33 -5,-1.33 z"
            transform="rotate(8)" />
        <text class="commandText" x="0" y="0">Command</text>
    </g>

    <g class="server" transform="translate(1050,150)">
        <path class="ServerBox" style="filter:url(#dropshadow)"
            fill="#fff8dc" stroke="#222" stroke-width="1"
            d="M-65,-25 h130 v100 h-130 z
                l15,-15 h130 v100 l-15,15
                m0,-100 l15,-15"
            transform="scale(2)" />

        <path class="ServerFilter"
            fill="#acf" stroke="#222" stroke-width="2"
            d="M-30,-30
                a30,10 0,0,1 60,0 v10 l-25,25 v30 l-10,-10 v-20 l-25,-25 z
                m5,0 a25,6 0,0,0 50,0 a25,6 0,0,0 -50,0"
            transform="translate(-60,80)" />

        <path class="ServerStorage"
            fill="#acf" stroke="#222" stroke-width="2"
            d="M-30,-30 
                a30,10 0,0,1 60,0 v60 
                a30,10 0,0,1 -60,0 z
               m60,0 a30,10 0,0,1 -60,0
               m60,15 a30,10 0,0,1 -60,0
               m60,15 a30,10 0,0,1 -60,0
               m60,15 a30,10 0,0,1 -60,0"
            transform="translate(60,80)" />

        <text class="ServerText" x="0" y="0">Server</text>
    </g>

    <g class="events" transform="translate(1100, 450)">
        <path class="commandArrow" style="filter:url(#dropshadow)"
            fill="#fca" stroke="#222" stroke-width="2"
            d="M-150,0
                c-1,-1.66 -.66,-5 1,-6
                c30,-20 145,-60 200,-50
                c2.5,.5 5,-2.5 5,-5 v-30
                c0,-5 3,-8 15,0 l120,80
                c3,2 3,6 0,8 l-120,80
                c-12,8 -15,5 -15,0 v-30
                c0,-2.5 -1,-5 -4.5,-6
                c-53,-7 -120,20 -150,40
                c-1.66,1 -4,.33 -5,-1.33 z"
            transform="rotate(140)" />
        
        <text class="commandText" x="-50" y="40">Events</text>
    </g>

    <g class="compute" transform="translate(825, 575)">
        <path class="ComputeBox" style="filter:url(#dropshadow)"
            fill="#fff8dc" stroke="#222" stroke-width="2"
            d="M-120,-80 h240 v160 h-240 z" />
        <path class="ComputeSum"
            fill="#acf" stroke="#222" stroke-width="3"
            d="M-55,-65
                h100 l10,40 h-7 l-3,-5 c-8,-14 -10,-20 -32,-20 h-50
                l45,45 l-40,40
                h45 c12,0 24,-4 32,-20 l3,-5 h7 l-12,50 h-98
                v-15 l40,-40 l-40,-40 z"
            transform="scale(0.66) translate(0,30)" />
        
        <text class="ViewText" x="0" y="-50">Computations</text>
    </g>

    <g class="updates" transform="translate(530, 500)">
        <path class="commandArrow" style="filter:url(#dropshadow)" 
            fill="#fca" stroke="#222" stroke-width="2"
            d="M-150,0
                c-1,-1.66 -.66,-5 1,-6
                c30,-20 145,-60 200,-50
                c2.5,.5 5,-2.5 5,-5 v-30
                c0,-5 3,-8 15,0 l120,80
                c3,2 3,6 0,8 l-120,80
                c-12,8 -15,5 -15,0 v-30
                c0,-2.5 -1,-5 -4.5,-6
                c-53,-7 -120,20 -150,40
                c-1.66,1 -4,.33 -5,-1.33 z"
            transform="scale(-1,1) rotate(0)" />
        
        <text class="commandText" x="-20" y="0">Updates</text>
    </g>

    <g class="views" transform="translate(170, 550) scale(1.5)">
        <path class="ViewScreen" style="filter:url(#dropshadow)"
            fill="#fff8dc" stroke="#222" stroke-width="1.33"
            d="M-100,-60 h200 v120 h-200 z
               m4,6 v108 h192 v-108 z
               M-5,60 v10 h-20 v5 h50 v-5 h-20 v-10 z"/>

        <path class="ViewScreenContent"
            fill="#222" d="M-100,-60 m4,6 v108 h192 v-108 z"/>

        <path class="ViewTree"
            fill="#222" stroke="#fff" stroke-width="2.5"
            d="M-50,-50
                m3,0 h10 a3,3 0,0,1 3,3 v10 a3,3 0,0,1 -3,3 h-10 a3,3 0,0,1 -3,-3 v-10 a3,3 0,0,1 3,-3 z
                m0,8 h10
                m10,-6 h60 v12 h-60 z
               M-42,-30 v12 m0,5 v12 m0,5 v12 m0,5 v8 h10
                m5,-8 h10 a3,3 0,0,1 3,3 v10 a3,3 0,0,1 -3,3 h-10 a3,3 0,0,1 -3,-3 v-10 a3,3 0,0,1 3,-3 z
                m0,8 h10 m-5,-5 v10
                m15,-11 h35 v12 h-35 z
               M-42,-24 h10
                m5,-8 h10 a3,3 0,0,1 3,3 v10 a3,3 0,0,1 -3,3 h-10 a3,3 0,0,1 -3,-3 v-10 a3,3 0,0,1 3,-3 z
                m0,8 h10
                m10,-6 h30 v12 h-30 z
               M-22,-12 v12 m0,5 v7 h10
                m5,-6 h25 v12 h-25 z
               M-22,-6 h10
                m5,-6 h40 v12 h-40 z"
            transform="translate(-40,5) scale(0.9)" />

        <path class="ViewGraph"
            fill="#222" stroke="#fff" stroke-width="2.5"
            d="M-40,40 v-50 h20 v50 z
               m25,0 v-70 h20 v70 z
               m25,0 v-60 h20 v60 z"
            transform="translate(50,0)" />
        
        <text class="ViewText" x="0" y="-90">Views</text>
    </g>

    <g class="schema build" transform="translate(700, 360) scale(2)">
        <path class="Oval" style="filter:url(#dropshadow)"
            fill="#fff" stroke="#222" stroke-width="1.33"
            d="M0,-40 m0,10 a100,30 0,0,1 100,30 a100,30 0,0,1 -100,30 a100,30 0,0,1 -100,-30 a100,30 0,0,1 100,-30 m0,70" />
        <!--<ellipse style="filter:url(#dropshadow)"
            fill="#fff" stroke="#222" stroke-width="1.5" 
            cx="0" cy="0" rx="100" ry="30"/>-->
        
        <text class="ViewText" font-weight="bold"
            x="0" y="3">Schema</text>
    </g>
    <g class="build" transform="translate(820, 170) scale(4)">
        <text class="ViewText"
            fill="#729C62" stroke="#222" stroke-width="1">✔</text>
    </g>
    <g class="build" transform="translate(1005, 250) scale(3)">
        <text class="ViewText"
            fill="#729C62" stroke="#222" stroke-width="1">✔</text>
    </g>
    <g class="build" transform="translate(1115, 250) scale(3)">
        <text class="ViewText"
            fill="#729C62" stroke="#222" stroke-width="1">✔</text>
    </g>
    <g class="build" transform="translate(1150, 420) scale(4)">
        <text class="ViewText"
            fill="#729C62" stroke="#222" stroke-width="1">✔</text>
    </g>
    <g class="build" transform="translate(870, 615) scale(3)">
        <text class="ViewText"
            fill="#729C62" stroke="#222" stroke-width="1">✔</text>
    </g>
    <g class="build" transform="translate(630, 520) scale(4)">
        <text class="ViewText"
            fill="#729C62" stroke="#222" stroke-width="1">✔</text>
    </g>
    <g class="build" transform="translate(290, 430) scale(4)">
        <text class="ViewText"
            fill="#729C62" stroke="#222" stroke-width="1">?</text>
    </g>

</svg> 
++++

////
[%build.hd]
* [language-cpp]#`[.token.class-name]##CommandFor##<T>`#
* [language-cpp]#`[.token.class-name]##ComamndValidatorFor##<T>`#
* [language-cpp]#`[.token.class-name]##RepositoryFor##<T>`#
* [language-cpp]#`[.token.class-name]##EventFor##<T>`#
* [language-cpp]#`[.token.class-name]##ComputeFor##<T>`#
* [language-cpp]#`[.token.class-name]##ViewModelFor##<T>`#
////

[.subtitle]
== ViewModels

[.source.hd]
== !

[source%nested, cpp, subs=quotes,macros]
----
// nest++
template&lt;class [.token.black]##T##>
using [.token.class-name]##ViewModelFor## = decltype(
        viewModelFor([.token.constant]##adl##, [.token.constant]##ptr##&lt;T>));
// nest--

// nest++
template&lt;class... Ts>
auto viewModelFor([.token.class-name]##ADL##, [.token.bold]##AllOf##&lt;Ts...> *)
    -> [.token.class-name]##AllOfView##&lt;Ts...>;
// nest--
----

[.source.hd]
== !

[source%nested, cpp, subs=quotes,macros]
----
nest++
template&lt;class... Ts>
class AllOfView : public [.token.class-name]##QObject## {
nest--






};
----

== Woboq Verdigris

[%build]
* Plug in replacement for Qt moc
* Allows templated `[.token.class-name]##QObject##`
* link:https://github.com/woboq/verdigris[github.com/woboq/verdigris]
* PR#69 adds "ConstExpr C++ API"

&nbsp;

[.cue]
****
Moc Compiler would require a lot of work.

Verdigris from Woboq is a huge win.
****


[.source.hd]
== !

[source%nested, cpp, subs=quotes,macros]
----
template&lt;class... Ts>
class AllOfView : public [.token.class-name]##QObject## {
  // nest++
  W_OBJECT(AllOfView)
  // nest--

};

// nest++
W_OBJECT_IMPL([.token.class-name]##AllOfView##&lt;Ts...>,
              template&lt;class... Ts>)
// nest--
----

[.cue]
****
W_OBJECT instead of Q_Object macro.
W_OBJECT_IMPL generates all the code moc would generate.
****

[.source.hd.s77x19]
== !

[.build]
--
[source%nested, cpp, subs=quotes,macros]
----
template&lt;class... Ts>
class AllOfView : public [.token.class-name]##QObject## {

  // nest++
  template&lt;[.token.keyword]##size_t## I,
  // nest++
           class = std::enable_if_t&lt;(I &lt; sizeof...(Ts))>>
  // nest--
  struct RegisterProperties {
    // nest++
    constexpr static auto [.token.constant]##property## = 
    // nest--
      // nest++
      w_cpp::[.token.function]##makeProperty##&lt;[.token.class-name]##QVariant##>(
          [.token.constant]##property_name##&lt;I>, [.token.constant]##qvariant_name##)
        // nest--
        // nest++
        .setGetter(&[.token.class-name]##AllOfView##::[.token.function]##getPropertyValue##&lt;I>)
        .setSetter(&[.token.class-name]##AllOfView##::[.token.function]##setPropertyValue##&lt;I>)
        .setNotify(&[.token.class-name]##AllOfView##::[.token.function]##propertyChanged##&lt;I>);
        // nest--
  };
  // nest--
  // nest++
  W_CPP_PROPERTY([.token.class-name]##RegisterProperties##)
  // nest--

};
----
--

[.cue]
****
To Register the properties we create a templated struct with any name.
We limit I to the amount of properties we have with enable_it_t.
Only the property compile time constant matters.
We build it with a type, a name and the type name.
We also provide how get, set and notify works for the property.
Finally we give that struct to Verdigris.

That's the pattern.

****

== !


++++
<!-- for editing help:
 * https://editor.method.ac
 * https://svg-edit.github.io/svgedit/releases/latest/editor/svg-editor.html
-->
<svg class="" viewBox="0 0 1280 720" width="1920" height="1080">

    <g class="clientMonitor" transform="translate(350,180) scale(1.5)">
        <g class="">
            <path class="UserScreen" style="filter:url(#dropshadow)" 
                fill="#fff8dc" stroke="#222" stroke-width="1.33"
                d="M-100,-60 h200 v120 h-200 z
                m4,6 v108 h192 v-108 z
                M-110,80 h5 
                    v-3 h12 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h7 v3 h3 
                    v-3 h12 v3 
                    h5 v5 H-110 z
                M60,70 h30 v30 c0,7 -7,15 -15,15 c-8,0 -15,-8 -15,-15 z m15,0 v15"/>

            <path class="UserScreenContent"
                fill="#222" d="M-100,-60 m4,6 v108 h192 v-108 z"/>
        </g>

        <path class="UserSmiley"
            fill="#ddc" stroke="#222" stroke-width="0.66"
            d="M0,-20 a20,20 0,0,0, 0,40 a20,20 0,0,0, 0,-40z 
                m-15,25 a16,10 0,0,0, 30,0
                m-7,-13 a3,3 0,1,0, 1,0 z
                m-16,0 a3,3 0,1,0, 1,0 z
                m8,-7 l8,-10 m-9,10 l2,-9"
            transform="translate(-110,-60) scale(2)" />

        <g class="">
            <path class="ActionButton"
                fill="#acf" stroke="#fff" stroke-width="2"
                d="M-85,-22
                    a6,6 0,0,1 6,-6 h160 
                    a6,6 0,0,1 6,6 v40
                    a6,6 0,0,1 -6,6 h-160
                    a6,6 0,0,1 -6,-6 z" />
            <text class="ActionText" x="0" y="0">Action</text>
            <path class="MouseCursor"
                fill="#fff" stroke="#222"
                d="M0,0 l10,17 l-7,-2 l3,10 h-12 l3,-10 l-7,2 z"
                transform="translate(45,5) rotate(-40) scale(2)" />
        </g>
    </g>

    <g class="command" transform="translate(700,140)">
        <path class="commandArrow" style="filter:url(#dropshadow)"
            fill="#fca" stroke="#222" stroke-width="2"
            d="M-150,0
                c-1,-1.66 -.66,-5 1,-6
                c30,-20 145,-60 200,-50
                c2.5,.5 5,-2.5 5,-5 v-30
                c0,-5 3,-8 15,0 l120,80
                c3,2 3,6 0,8 l-120,80
                c-12,8 -15,5 -15,0 v-30
                c0,-2.5 -1,-5 -4.5,-6
                c-53,-7 -120,20 -150,40
                c-1.66,1 -4,.33 -5,-1.33 z"
            transform="rotate(8)" />
        <text class="commandText" x="0" y="0">Command</text>
    </g>

    <g class="server" transform="translate(1050,150)">
        <path class="ServerBox" style="filter:url(#dropshadow)"
            fill="#fff8dc" stroke="#222" stroke-width="1"
            d="M-65,-25 h130 v100 h-130 z
                l15,-15 h130 v100 l-15,15
                m0,-100 l15,-15"
            transform="scale(2)" />

        <path class="ServerFilter"
            fill="#acf" stroke="#222" stroke-width="2"
            d="M-30,-30
                a30,10 0,0,1 60,0 v10 l-25,25 v30 l-10,-10 v-20 l-25,-25 z
                m5,0 a25,6 0,0,0 50,0 a25,6 0,0,0 -50,0"
            transform="translate(-60,80)" />

        <path class="ServerStorage"
            fill="#acf" stroke="#222" stroke-width="2"
            d="M-30,-30 
                a30,10 0,0,1 60,0 v60 
                a30,10 0,0,1 -60,0 z
               m60,0 a30,10 0,0,1 -60,0
               m60,15 a30,10 0,0,1 -60,0
               m60,15 a30,10 0,0,1 -60,0
               m60,15 a30,10 0,0,1 -60,0"
            transform="translate(60,80)" />

        <text class="ServerText" x="0" y="0">Server</text>
    </g>

    <g class="events" transform="translate(1100, 450)">
        <path class="commandArrow" style="filter:url(#dropshadow)"
            fill="#fca" stroke="#222" stroke-width="2"
            d="M-150,0
                c-1,-1.66 -.66,-5 1,-6
                c30,-20 145,-60 200,-50
                c2.5,.5 5,-2.5 5,-5 v-30
                c0,-5 3,-8 15,0 l120,80
                c3,2 3,6 0,8 l-120,80
                c-12,8 -15,5 -15,0 v-30
                c0,-2.5 -1,-5 -4.5,-6
                c-53,-7 -120,20 -150,40
                c-1.66,1 -4,.33 -5,-1.33 z"
            transform="rotate(140)" />
        
        <text class="commandText" x="-50" y="40">Events</text>
    </g>

    <g class="compute" transform="translate(825, 575)">
        <path class="ComputeBox" style="filter:url(#dropshadow)"
            fill="#fff8dc" stroke="#222" stroke-width="2"
            d="M-120,-80 h240 v160 h-240 z" />
        <path class="ComputeSum"
            fill="#acf" stroke="#222" stroke-width="3"
            d="M-55,-65
                h100 l10,40 h-7 l-3,-5 c-8,-14 -10,-20 -32,-20 h-50
                l45,45 l-40,40
                h45 c12,0 24,-4 32,-20 l3,-5 h7 l-12,50 h-98
                v-15 l40,-40 l-40,-40 z"
            transform="scale(0.66) translate(0,30)" />
        
        <text class="ViewText" x="0" y="-50">Computations</text>
    </g>

    <g class="updates" transform="translate(530, 500)">
        <path class="commandArrow" style="filter:url(#dropshadow)" 
            fill="#fca" stroke="#222" stroke-width="2"
            d="M-150,0
                c-1,-1.66 -.66,-5 1,-6
                c30,-20 145,-60 200,-50
                c2.5,.5 5,-2.5 5,-5 v-30
                c0,-5 3,-8 15,0 l120,80
                c3,2 3,6 0,8 l-120,80
                c-12,8 -15,5 -15,0 v-30
                c0,-2.5 -1,-5 -4.5,-6
                c-53,-7 -120,20 -150,40
                c-1.66,1 -4,.33 -5,-1.33 z"
            transform="scale(-1,1) rotate(0)" />
        
        <text class="commandText" x="-20" y="0">Updates</text>
    </g>

    <g class="views" transform="translate(170, 550) scale(1.5)">
        <path class="ViewScreen" style="filter:url(#dropshadow)"
            fill="#fff8dc" stroke="#222" stroke-width="1.33"
            d="M-100,-60 h200 v120 h-200 z
               m4,6 v108 h192 v-108 z
               M-5,60 v10 h-20 v5 h50 v-5 h-20 v-10 z"/>

        <path class="ViewScreenContent"
            fill="#222" d="M-100,-60 m4,6 v108 h192 v-108 z"/>

        <path class="ViewTree"
            fill="#222" stroke="#fff" stroke-width="2.5"
            d="M-50,-50
                m3,0 h10 a3,3 0,0,1 3,3 v10 a3,3 0,0,1 -3,3 h-10 a3,3 0,0,1 -3,-3 v-10 a3,3 0,0,1 3,-3 z
                m0,8 h10
                m10,-6 h60 v12 h-60 z
               M-42,-30 v12 m0,5 v12 m0,5 v12 m0,5 v8 h10
                m5,-8 h10 a3,3 0,0,1 3,3 v10 a3,3 0,0,1 -3,3 h-10 a3,3 0,0,1 -3,-3 v-10 a3,3 0,0,1 3,-3 z
                m0,8 h10 m-5,-5 v10
                m15,-11 h35 v12 h-35 z
               M-42,-24 h10
                m5,-8 h10 a3,3 0,0,1 3,3 v10 a3,3 0,0,1 -3,3 h-10 a3,3 0,0,1 -3,-3 v-10 a3,3 0,0,1 3,-3 z
                m0,8 h10
                m10,-6 h30 v12 h-30 z
               M-22,-12 v12 m0,5 v7 h10
                m5,-6 h25 v12 h-25 z
               M-22,-6 h10
                m5,-6 h40 v12 h-40 z"
            transform="translate(-40,5) scale(0.9)" />

        <path class="ViewGraph"
            fill="#222" stroke="#fff" stroke-width="2.5"
            d="M-40,40 v-50 h20 v50 z
               m25,0 v-70 h20 v70 z
               m25,0 v-60 h20 v60 z"
            transform="translate(50,0)" />
        
        <text class="ViewText" x="0" y="-90">Views</text>
    </g>

    <g class="schema" transform="translate(700, 360) scale(2)">
        <path class="Oval" style="filter:url(#dropshadow)"
            fill="#fff" stroke="#222" stroke-width="1.33"
            d="M0,-40 m0,10 a100,30 0,0,1 100,30 a100,30 0,0,1 -100,30 a100,30 0,0,1 -100,-30 a100,30 0,0,1 100,-30 m0,70" />
        <!--<ellipse style="filter:url(#dropshadow)"
            fill="#fff" stroke="#222" stroke-width="1.5" 
            cx="0" cy="0" rx="100" ry="30"/>-->
        
        <text class="ViewText" font-weight="bold"
            x="0" y="3">Schema</text>
    </g>
    <g class="" transform="translate(820, 170) scale(4)">
        <text class="ViewText"
            fill="#729C62" stroke="#222" stroke-width="1">✔</text>
    </g>
    <g class="" transform="translate(1005, 250) scale(3)">
        <text class="ViewText"
            fill="#729C62" stroke="#222" stroke-width="1">✔</text>
    </g>
    <g class="" transform="translate(1115, 250) scale(3)">
        <text class="ViewText"
            fill="#729C62" stroke="#222" stroke-width="1">✔</text>
    </g>
    <g class="" transform="translate(1150, 420) scale(4)">
        <text class="ViewText"
            fill="#729C62" stroke="#222" stroke-width="1">✔</text>
    </g>
    <g class="" transform="translate(870, 615) scale(3)">
        <text class="ViewText"
            fill="#729C62" stroke="#222" stroke-width="1">✔</text>
    </g>
    <g class="" transform="translate(630, 520) scale(4)">
        <text class="ViewText"
            fill="#729C62" stroke="#222" stroke-width="1">✔</text>
    </g>
    <g class="build" transform="translate(290, 430) scale(4)">
        <text class="ViewText"
            fill="#729C62" stroke="#222" stroke-width="1">✔</text>
    </g>

</svg> 
++++


== Recap

[%build]
* distributed system
* strong types
* data schemas
* generate code
* build QObjects

&nbsp;


== &plus;+ Advantages &plus;+ &nbsp;

[%build]
* central schema definition
* tailored to domain
* split up data and logic
* very good testability

== \-- Disadvantages \--

[%build]
* uncommon + learning curve
* C++ requires some boilerplate
* long type names

== Links

[%build]
* link:https://github.com/woboq/verdigris[github.com/woboq/verdigris]
* link:https://github.com/basicpp17[github.com/basicpp17]
* link:https://github.com/arBmind/2019-types-en[github.com/arBmind/2019-types-en]

== !

image::andreas.png[role="center", width="400"]

&nbsp;

[%build]
* Andreas Reischuck
* @*arBmind*

[.cue]
****
Schulungen

C++ - Qt - Clean Code
****

== !

image::hicknhackLogo_new_text.png[role="center", width="400"]

&nbsp;

[.green]_Work_ with us…

[.cue]
****
* C++ Qt UIs
* Dresden
****

== !

image::cppug.png[role="pull-right", width="550"]

&nbsp;

Give a [.green]*Talk* +
=> get a *Dresden* tour

[.cue]
****
* Video Recording
* personal city tour
* I visit your local usergroup
****

== !

image::rebuild_logo.png[role="pull-left", width="450"]

*Rebuild* language project

[.bigger]
&nbsp;

[.center]
[.green]__Collaborate__

[.cue]
****
* improved language & tools for everybody
* Compiler built with C++17
****

== Try out *more*!

== Try out *Type* Driven *Development*!

== Photo Credits

[.small]
* link:https://www.flickr.com/photos/purpleseadonkey/4775066884[Explosion] link:https://creativecommons.org/licenses/by/2.0/[(cc-by-license)]

[.subtitle]
== Thank you!

[language-cpp]#`co_await question_ready()`#

== Opaque Strong Types

[.source.hd.s77x19]
== !

[.build]
--
[source%nested, cpp, subs=quotes,macros]
----
// nest++
// nest++
struct PersonId;
// nest--
// nest++
constexpr auto makeOpaque(Strong&lt;int, struct PersonIdTag>)
    -> PersonId;
// nest--

struct PersonId : Strong&lt;int, struct PersonIdTag> {
    // nest++
    using Strong::Strong;
    // nest--
};
// nest--
----
--

[.source.hd.s77x19]
== !

[.build]
--
[source%nested, cpp]
----
#define STRONG_OPAQUE(name, type, ...)                   \
  struct name;                                           \
  constexpr auto makeOpaqueType(Strong<                  \
      type, name##Tag, ##__VA_ARGS__>) -> name;          \
  struct name : Strong<type, name##Tag, ##__VA_ARGS__> { \
      using Strong::Strong;                              \
  }

STRONG_OPAQUE(PersonId, int);
----
--
